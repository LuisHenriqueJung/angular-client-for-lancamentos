
<link rel="stylesheet" href="https://unpkg.com/primeflex@^3/primeflex.css">

<div class="container">
  <form #lancamentoForm="ngForm" (submit)=" salvarlancamento(lancamentoForm)">
  <div class="grid">
    <div class="col-12">
      <h1>{{editando ? 'Editar' : 'Cadastrar'}}  lançamento</h1>
    </div>
    <div class=" col-12 grid">
      <div class="col-4" >

        <p-selectButton [options]="stateOptions" [(ngModel)]="lancamento.tipo" optionLabel="label" optionValue="value" name="tipo"></p-selectButton>
      </div>
    </div>
  </div>
  <div class=" grid">
      <div class="field col-6 md:col-3 p-fluid">
        <label >Vencimento</label>
        <p-calendar [(ngModel)]="lancamento.dataVencimento" [required]="true" name="dataVencimento" ngModel  #vencimento="ngModel"[showIcon]="true" dateFormat="dd/mm/yy" class="p-inputtext-sm"></p-calendar>
       <!--<app-message [control]="vencimento.control" error="required" message="Informe o vencimento! " ></app-message>-->
      </div>
      <div class=" field col-6 md:col-3 p-fluid">
        <label for="">{{value == 'receita' ? 'Recebimento' : 'Pagamento'}} </label>
        <p-calendar name="dataPagamento" #pagmtoRecebmto="ngModel" ngModel [required]="true" [(ngModel)]="lancamento.dataPagamento" [showIcon]="true" dateFormat="dd/mm/yy" class="p-inputtext-sm"></p-calendar>
        <!--<app-message [control]="pagmtoRecebmto.control" error="required" message="Informe {{value == 'receita' ? 'o recebimento' : 'o pagamento'}} " ></app-message>-->
      </div>
  </div>
  <div class=" grid">
    <div class="field col-8 md:col-8 p-fluid">
      <span class="p-float-label">

      <input id="descricao" name="descricao" ngModel #descricao="ngModel" type="text" pInputText required minlength="5" [(ngModel)]="lancamento.descricao" class="p-inputtext-sm">
      <label for="descricao">Descrição</label>
      <!--<app-message [control]="descricao.control" error="required" message="Informe uma descrição!" ></app-message>
      <app-message [control]="descricao.control" error="minlength" message="Mínimo de {{descricao.errors?.['minlength']?.requiredLength}} caractéres!" ></app-message>-->
    </span>
    </div>
    <div class=" field col-4 md:col-4 p-fluid">
      <span class="p-float-label">

      <p-inputNumber id="valor" name="valor" ngModel #valor="ngModel" [required]="true" mode="currency" currency="BRL" class="p-inputtext-sm" [(ngModel)]="lancamento.valor"></p-inputNumber>
      <label for="valor">Valor</label>
      <!-- <app-message [control]="valor.control" error="required" message="Informe um valor!" ></app-message>-->
    </span>
    </div>
  </div>
  <div class=" grid">
    <div class="field col-6 md:col-6 p-fluid">
      <label >Categoria</label>
      <p-dropdown name="categoria" ngModel #categoria="ngModel" [required]="true" [options]="categorias" placeholder="Selecione" [(ngModel)]="lancamento.categoria" optionLabel="nome"  class="p-inputtext-sm"></p-dropdown>
     <!-- <app-message [control]="categoria.control" error="required" message="Selecione uma categoria!" ></app-message>-->
    </div>
    <div class=" field col-6 md:col-6 p-fluid">
      <label for="">Pessoa</label>
      <p-dropdown name="pessoa" ngModel #pessoa="ngModel" [required]="true" [options]="pessoas" placeholder="Selecione" [(ngModel)]="lancamento.pessoa" optionLabel="nome"  class="p-inputtext-sm"></p-dropdown>
    </div>
    <div class=" field col-12  p-fluid">
    <span class="p-float-label">
      <textarea id="float-input" rows="3" cols="30" ngModel name="observacao" [(ngModel)]="lancamento.observacao" pInputTextarea></textarea>
      <label for="float-input">Observação</label>
  </span>
</div>

  </div>
  <div class="grid">
    <div class="col-1">
      <p-button [disabled]="lancamentoForm.invalid!" styleClass="p-button-sm" type="Submit">Salvar</p-button>

    </div>
    <div class="col-8">
      <a routerLink="/lancamentos">Voltar para a pesquisa</a>
    </div>

  </div>
</form>

</div>

