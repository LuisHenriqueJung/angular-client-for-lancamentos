
<link rel="stylesheet" href="https://unpkg.com/primeflex@^3/primeflex.css">

<div class="container">
  <form  (submit)=" salvarlancamento()" [formGroup]="formulario">
  <div class="grid">
    <div class="col-12">
      <h1>{{editando ? 'Editar' : 'Cadastrar'}}  lançamento</h1>
    </div>
    <div class=" col-12 grid">
      <div class="col-4" >

        <p-selectButton [options]="stateOptions" optionLabel="label" optionValue="value" name="tipo" formControlName="tipo"></p-selectButton>
      </div>
    </div>
  </div>
  <div class=" grid">
      <div class="field col-6 md:col-3 p-fluid">
        <label >Vencimento</label>
        <p-calendar formControlName="dataVencimento" name="dataVencimento" [showIcon]="true" dateFormat="dd/mm/yy" class="p-inputtext-sm"></p-calendar>
       <app-message [control]="formulario.get('dataVencimento')" error="required" text="Informe o vencimento! " ></app-message>
      </div>
      <div class=" field col-6 md:col-3 p-fluid">
        <label for="">{{formulario.get('tipo')?.value == 'RECEITA' ? 'Recebimento' : 'Pagamento'}} </label>
        <p-calendar formControlName="dataPagamento" name="dataPagamento"  [showIcon]="true" dateFormat="dd/mm/yy" class="p-inputtext-sm"></p-calendar>
        <app-message [control]="formulario.get('dataPagamento')" error="required" text="Informe {{formulario.get('tipo')?.value == 'RECEITA' ? 'o recebimento' : 'o pagamento'}} " ></app-message>
      </div>
  </div>
  <div class=" grid">
    <div class="field col-8 md:col-8 p-fluid">
      <span class="p-float-label">

      <input formControlName="descricao" id="descricao" name="descricao"  type="text" pInputText  class="p-inputtext-sm">
      <label for="descricao">Descrição</label>
      <app-message [control]="formulario.get('descricao')" error="required" text="Informe uma descrição!" ></app-message>
      <app-message [control]="formulario.get('descricao')" error="minlength" text="Mínimo de {{formulario.get('descricao')?.errors?.['minlength']?.requiredLength}} caracteres!" ></app-message>
    </span>
    </div>
    <div class=" field col-4 md:col-4 p-fluid">
      <span class="p-float-label">

      <p-inputNumber formControlName="valor" id="valor" name="valor"  mode="currency" currency="BRL" class="p-inputtext-sm" ></p-inputNumber>
      <label for="valor">Valor</label>
      <app-message [control]="formulario.get('valor')" error="required" text="Informe um valor!" ></app-message>
    </span>
    </div>
  </div>
  <div class=" grid">
    <div class="field col-6 md:col-6 p-fluid" >
      <label >Categoria</label>
      <p-dropdown formControlName="categoria" name="categoria"  [options]="categorias" placeholder="Selecione"  optionLabel="nome"  class="p-inputtext-sm"></p-dropdown>
      <app-message [control]="formulario.get('categoria')" error="required" text="Selecione uma categoria!" ></app-message>
    </div>
    <div class=" field col-6 md:col-6 p-fluid" >
      <label for="">Pessoa</label>
      <p-dropdown formControlName="pessoa" name="pessoa" [options]="pessoas" placeholder="Selecione"  optionLabel="nome"  class="p-inputtext-sm"></p-dropdown>
    </div>
    <div class=" field col-12  p-fluid">
    <span class="p-float-label">
      <textarea formControlName="observacao" id="float-input" rows="3" cols="30"  name="observacao"  pInputTextarea></textarea>
      <label for="float-input">Observação</label>
  </span>
</div>

  </div>
  <div class="grid">
    <div class="col-1">
      <p-button [disabled]="formulario.invalid" styleClass="p-button-sm" type="Submit">Salvar</p-button>

    </div>
    <div class="col-8">
      <a routerLink="/lancamentos">Voltar para a pesquisa</a>
    </div>

  </div>
</form>

</div>

